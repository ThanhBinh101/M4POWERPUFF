<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M3PowerPuff</title>
    {% load static%}
    <link rel="icon" type="image/x-icon" href="{%static 'logo.png'%}">

    <link rel="stylesheet" type ="text/css" href="{%static 'operatorpage.css'%}">

    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">

    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet"/>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</head>
<body>
    <header>
        <div class = "logo-name">
            <img src="{%static 'logo.png'%}" alt="">
            <a href='{% url 'mainpage' %}'>M3PowerPuff</a>
        </div>

        <ul class = "navlist">
            <li><a href="">Home</a></li>
            <li><a href="">Services</a></li>
            <li><a href="">Doctors</a></li>
            <li><a href="">About us</a></li>
            <li><a href="">Contact us</a></li>
        </ul>

        <button type="button" class="btn btn-primary" data-bs-toggle="modal">
            <a href='{% url 'mainpage' %}'>Log out</a>
        </button>

    </header>
    
    <section class = "displaybox">
        <div class = "textbox">
            <h2>Appointment Manager Information</h2>
            <h6>Name</h6>
            <p style="color:#ff66b2" id = "OperatorName">{{operator.name}}</p>
            <h6>Gmail</h6>
            <p id = "OperatorGmail">{{operator.gmail}}</p>
            <h6>Date of Birth</h6>
            <p id = "DateofBirth">{{manager.dob}}</p>
            <h6>Years</h6>
            <p id = "DoctorYear">{{manager.years}}</p>
        </div> 

        <div class = "Operatorinfo">
            <div class = "Operatorimg">
                <img src="{%static 'appointmentmana.png'%}">
            </div>

            <div style = "margin-top: 5%" class = 'OperatorHistory'>
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#OperatorHistory">Cancel History</button>
            </div>

            <div style = "margin-top: 5%" class = 'schedule'>
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="">Schedule</button>
            </div>

            <div class="modal fade" id="OperatorHistory" tabindex="-1" aria-labelledby="viewOperatorHistoryLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl modal-dialog-centered" style="max-width: 1300px;">
                  <div class="modal-content">
                    <div class="modal-header CancelHistoryHeader">
                      <h4 class="modal-title" id="viewOperatorHistoryLabel">Cancel Appointment History</h4>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body CancelHistoryBody">
                        <div class="table-wrapper">
                            <table class="table table-bordered" id="myTable">
                                <thead>
                                    <tr class="table-danger">
                                        <th style="width:20%; text-align: center;">Appointment ID</th>
                                        <th style="width:20%; text-align: center;">Patient ID</th>
                                        <th style="width:15%; text-align: center;">Patient Name</th>
                                        <th style="width:10%; text-align: center;">Department</th>
                                        <th style="width:10%; text-align: center;">Wanted Time</th>
                                        <th style="width:10%; text-align: center;">Remove Date</th>
                                        <th style="width:15%; text-align: center;">Reason</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for his in operatorhistory%}
                                        <tr class="table-danger">
                                            <td style="text-align: center;">{{his.appointmentID}}</td>
                                            <td style="text-align: center;">{{his.patientID}}</td>
                                            <td style="text-align: center;">{{his.patientName}}</td>
                                            <td style="text-align: center;">{{his.department}}</td>
                                            <td style="text-align: center;">{{his.wantedTime}}</td>
                                            <td style="text-align: center;">{{his.removedate}}</td>
                                            <td style="text-align: center;">{{his.reason}}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer CancelHistoryFooter" style="background-color: rgba(4, 135, 217, 0.5);">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
            </div>

        </div>

    </section>

    <section class="operatormanagement">
        <h3 class="heading">Appointment Setting</h3>
        <div class ="timetable">
            <table>
                <tr>
                    <th style="width: 20%">Patient</th>
                    <th style="width: 20%">Department</th>
                    <th style="width: 20%">Wanted Time</th>
                    <th style="width: 20%">Doctor</th>
                    <th style="width: 20%">Action</th>
                </tr>
                {% for appoint in appointmentTable%}
                <tr>
                    <td>{{ appoint.PatientName }}</td>
                    <td>{{ appoint.Department }}</td>
                    <td>{{ appoint.Time }}</td>
                    <td>
                        {% if appoint.Department == "Otology" %}
                        <button type="button" class="ri-nurse-line" data-bs-toggle="modal" data-bs-target="#otologyModal{{appoint.AppointmentID}}"></button>

                        <div class="modal fade" id="otologyModal{{appoint.AppointmentID}}" tabindex="-1" aria-labelledby="otologyModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-xl" style="max-width: 1500px;">
                              <div class="modal-content">
                                <div class="modal-header OtologyHeader">
                                  <h1 class="modal-title fs-5" id="otologyModalLabel">Otology Doctor</h1>
                                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body freetimetable ">
                                    <table>
                                        <tr>
                                            <th style="width: 19%">Doctor - Time</th>
                                            <th style="width: 4.5%">7:00</th>
                                            <th style="width: 4.5%">7:30</th>
                                            <th style="width: 4.5%">8:00</th>
                                            <th style="width: 4.5%">8:30</th>
                                            <th style="width: 4.5%">9:00</th>
                                            <th style="width: 4.5%">9:30</th>
                                            <th style="width: 4.5%">10:00</th>
                                            <th style="width: 4.5%">10:30</th>
                                            <th style="width: 4.5%">11:00</th>
                                            <th style="width: 4.5%">11:30</th>
                                            <th style="width: 4.5%">13:00</th>
                                            <th style="width: 4.5%">13:30</th>
                                            <th style="width: 4.5%">14:00</th>
                                            <th style="width: 4.5%">14:30</th>
                                            <th style="width: 4.5%">15:00</th>
                                            <th style="width: 4.5%">15:30</th>
                                            <th style="width: 4.5%">16:00</th>
                                            <th style="width: 4.5%">16:30</th>
                                        </tr>
                                        {% for doc in otologyDoc %}
                                        <tr>
                                            <td>{{ doc.doctorName}}</td>
                                            <td>
                                                {% if "07:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift%}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "07:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "08:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "08:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "09:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "09:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "10:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "10:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "11:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "11:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "13:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "13:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "14:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}
                                                
                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "14:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift%}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "15:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift%}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "15:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "16:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                               {% if "16:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </table>
                                </div>
                                <div class="modal-footer OtologyFooter" style="background-color: rgba(4, 135, 217, 0.5);">
                                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                              </div>
                            </div>
                        </div>
                        {% elif appoint.Department == "Rhinology" %}
                        <button type="button" class="ri-nurse-line" data-bs-toggle="modal" data-bs-target="#rhinologyModal{{appoint.AppointmentID}}"></button>

                        <div class="modal fade" id="rhinologyModal{{appoint.AppointmentID}}" tabindex="-1" aria-labelledby="rhinologyModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-xl" style="max-width: 1500px;">
                              <div class="modal-content">
                                <div class="modal-header RhinologyHeader">
                                  <h1 class="modal-title fs-5" id="rhinologyModalLabel">Rhinology Doctor</h1>
                                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body freetimetable">
                                    <table>
                                        <tr>
                                            <th style="width: 19%">Doctor - Time</th>
                                            <th style="width: 4.5%">7:00</th>
                                            <th style="width: 4.5%">7:30</th>
                                            <th style="width: 4.5%">8:00</th>
                                            <th style="width: 4.5%">8:30</th>
                                            <th style="width: 4.5%">9:00</th>
                                            <th style="width: 4.5%">9:30</th>
                                            <th style="width: 4.5%">10:00</th>
                                            <th style="width: 4.5%">10:30</th>
                                            <th style="width: 4.5%">11:00</th>
                                            <th style="width: 4.5%">11:30</th>
                                            <th style="width: 4.5%">13:00</th>
                                            <th style="width: 4.5%">13:30</th>
                                            <th style="width: 4.5%">14:00</th>
                                            <th style="width: 4.5%">14:30</th>
                                            <th style="width: 4.5%">15:00</th>
                                            <th style="width: 4.5%">15:30</th>
                                            <th style="width: 4.5%">16:00</th>
                                            <th style="width: 4.5%">16:30</th>
                                        </tr>
                                        {% for doc in rhinologyDoc %}
                                        <tr>
                                            <td>{{ doc.doctorName}}</td>
                                            <td>
                                                {% if "07:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift%}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "07:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "08:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "08:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "09:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "09:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "10:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "10:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "11:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "11:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "13:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "13:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "14:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}
                                                
                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "14:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift%}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "15:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift%}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "15:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "16:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                               {% if "16:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </table>
                                </div>
                                <div class="modal-footer RhinologyFooter" style="background-color: rgba(4, 135, 217, 0.3);">
                                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                              </div>
                            </div>
                        </div>
                        {% else %}
                        <button type="button" class="ri-nurse-line" data-bs-toggle="modal" data-bs-target="#laryngologyModal{{appoint.AppointmentID}}"></button>

                        <div class="modal fade" id="laryngologyModal{{appoint.AppointmentID}}" tabindex="-1" aria-labelledby="laryngologyModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-xl" style="max-width: 1500px;">
                              <div class="modal-content">
                                <div class="modal-header LaryngologyHeader">
                                  <h1 class="modal-title fs-5" id="laryngologyModalLabel">Laryngology Doctor</h1>
                                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body freetimetable">
                                    <table>
                                        <tr>
                                            <th style="width: 19%">Doctor - Time</th>
                                            <th style="width: 4.5%">7:00</th>
                                            <th style="width: 4.5%">7:30</th>
                                            <th style="width: 4.5%">8:00</th>
                                            <th style="width: 4.5%">8:30</th>
                                            <th style="width: 4.5%">9:00</th>
                                            <th style="width: 4.5%">9:30</th>
                                            <th style="width: 4.5%">10:00</th>
                                            <th style="width: 4.5%">10:30</th>
                                            <th style="width: 4.5%">11:00</th>
                                            <th style="width: 4.5%">11:30</th>
                                            <th style="width: 4.5%">13:00</th>
                                            <th style="width: 4.5%">13:30</th>
                                            <th style="width: 4.5%">14:00</th>
                                            <th style="width: 4.5%">14:30</th>
                                            <th style="width: 4.5%">15:00</th>
                                            <th style="width: 4.5%">15:30</th>
                                            <th style="width: 4.5%">16:00</th>
                                            <th style="width: 4.5%">16:30</th>
                                        </tr>
                                        {% for doc in laryngologyDoc %}
                                        <tr>
                                            <td>{{ doc.doctorName}}</td>
                                            <td>
                                                {% if "07:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift%}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "07:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "08:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "08:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "09:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "09:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "10:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "10:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "11:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "11:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Morning" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "13:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "13:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "14:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}
                                                
                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "14:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift%}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "15:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift%}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "15:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if "16:00" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                            <td>
                                               {% if "16:30" in doc.doctorFreeTime %}
                                                    <i class='bx bx-check' style="color: #0487D9; font-size:20px"></i>
                                                {% elif "Afternoon" == doc.doctorShift or "BothShift" == doc.doctorShift %}
                                                    <i class='bx bx-x' style="color: red; font-size:20px"></i>
                                                {% else %}

                                                {% endif %}
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </table>
                                </div>
                                <div class="modal-footer LaryngologyFooter" style="background-color: rgba(4, 135, 217, 0.5);">
                                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                              </div>
                            </div>
                        </div>
                        {% endif %}
                    </td>
                    <td>
                        <button class="ri-heart-add-line" data-bs-toggle="modal" data-bs-target="#addingAppointModal{{ appoint.AppointmentID }}"></button>

                        <div class="modal fade" id="addingAppointModal{{ appoint.AppointmentID }}" tabindex="-1" aria-labelledby="addingAppointModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                              <div class="modal-content">
                                <div class="modal-header AssignHeader">
                                  <h1 class="modal-title fs-5" id="addingAppointModalLabel">Assign Doctor And Time</h1>
                                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body AssignBody">
                                    <form id="asigndoctorandtime{{ appoint.AppointmentID }}" method="POST" > {% csrf_token %}
                                        <input type="hidden" name="appointID" value={{ appoint.AppointmentID }}>
                                        <input type="hidden" name="adding-removingAppoint" value="form1">
                                        <div class="mb-3" style="text-align: left">
                                            <label class="form-label">Choose Doctor</label>
                                            <select class="form-select" name="doctor" style = "color: #ff66b2"; aria-label="doctor" required>
                                                <option selected>Choose doctor</option>
                                                {% if appoint.Department == "Otology" %}
                                                    {% for doc in otologyDoc %}
                                                    <option value={{doc.doctorID}}> {{ doc.doctorName }}</option>
                                                    {% endfor %}
                                                {% elif appoint.Department == "Rhinology" %}
                                                    {% for doc in rhinologyDoc %}
                                                    <option value={{doc.doctorID}}> {{ doc.doctorName }}</option>
                                                    {% endfor %}
                                                {% else %}
                                                    {% for doc in laryngologyDoc %}
                                                    <option value={{doc.doctorID}}> {{ doc.doctorName }}</option>
                                                    {% endfor %}
                                                {% endif %}
                                            </select>
                                        </div>
                                        <div class="mb-3" style="text-align: left">
                                            <label class="form-label">Choose Time</label>
                                            <select class="form-select" name="time" style = "color: #ff66b2"; aria-label="time" required>
                                                <option selected>Choose time</option>
                                                <option value="07:00">07:00</option>
                                                <option value="07:30">07:30</option>
                                                <option value="08:00">08:00</option>
                                                <option value="08:30">08:30</option>
                                                <option value="09:00">09:00</option>
                                                <option value="09:30">09:30</option>
                                                <option value="10:00">10:00</option>
                                                <option value="10:30">10:30</option>
                                                <option value="11:00">11:00</option>
                                                <option value="11:30">11:30</option>
                                                <option value="13:00">13:00</option>
                                                <option value="13:30">13:30</option>
                                                <option value="14:00">14:00</option>
                                                <option value="14:30">14:30</option>
                                                <option value="15:00">15:00</option>
                                                <option value="15:30">15:30</option>
                                                <option value="16:00">16:00</option>
                                                <option value="16:30">16:30</option>
                                            </select>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer AssignFooter" style="background-color: rgba(4, 135, 217, 0.5);">
                                    <button type="submit" form="asigndoctorandtime{{ appoint.AppointmentID }}" class="btn btn-primary">Submit</button>
                                </div>
                              </div>
                            </div>
                        </div>

                        <button class="ri-dislike-line" data-bs-toggle="modal" data-bs-target="#removingAppointment{{ appoint.AppointmentID }}"></button>

                        <div class="modal fade" id="removingAppointment{{ appoint.AppointmentID }}" tabindex="-1" aria-labelledby="removingAppointmentLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                              <div class="modal-content">
                                <div class="modal-header CancelHeader">
                                  <h1 class="modal-title fs-5" id="removingAppointmentLabel">Cancel Appointment</h1>
                                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body CancelBody">
                                    <form id="removeAppoint{{ appoint.AppointmentID }}" method="POST" > {% csrf_token %}
                                        <input type="hidden" name="appointID" value={{ appoint.AppointmentID }}>
                                        <input type="hidden" name="patientID" value={{ appoint.PatientID }}>
                                        <input type="hidden" name="adding-removingAppoint" value="form2">
                                        <div class="mb-3" style="text-align: left">
                                            <label for="reasonRemove" class="form-label" style="color:#ff66b2">Reason</label>
                                            <textarea class="form-control" name="reasonRemove" id="reasonRemove" rows="3" placeholder="Enter reason for cancelling appointment" required></textarea>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer CancelFooter" style="background-color: rgba(4, 135, 217, 0.5);">
                                    <button type="submit" form="removeAppoint{{ appoint.AppointmentID }}" class="btn btn-primary">Submit</button>
                                </div>
                              </div>
                            </div>
                        </div>
                    </td>      
                </tr>
                {% endfor %}
            </table>
        </div>

    </section>

</body>
</html>